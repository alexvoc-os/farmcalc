[build]
  command = "npm run build"
  publish = ".next"

# Plugin Next.js pentru Netlify
[[plugins]]
  package = "@netlify/plugin-nextjs"

# Headers pentru paginile HTML - fără cache
[[headers]]
  for = "/"
  [headers.values]
    Cache-Control = "no-cache, no-store, must-revalidate"
    Pragma = "no-cache"
    Expires = "0"

[[headers]]
  for = "/*.html"
  [headers.values]
    Cache-Control = "no-cache, no-store, must-revalidate"
    Pragma = "no-cache"
    Expires = "0"

# Next.js data files - fără cache
[[headers]]
  for = "/_next/data/*"
  [headers.values]
    Cache-Control = "no-cache, no-store, must-revalidate"

# Fișierele statice cu hash - pot fi cache-uite
[[headers]]
  for = "/_next/static/css/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/_next/static/media/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/fonts/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# JS chunks - cache scurt pentru a permite actualizări
[[headers]]
  for = "/_next/static/chunks/*"
  [headers.values]
    Cache-Control = "public, max-age=3600, stale-while-revalidate=86400"

# Forțează revalidarea la fiecare deploy
[build.environment]
  NETLIFY_NEXT_PLUGIN_SKIP = "false"
